# ChatZen Android App Implementation Plan

I will transform the current empty Android project into a multi-model AI chat tool.

## 1. Project Configuration & Dependencies
- Update `libs.versions.toml` and `build.gradle.kts` to include:
  - **Navigation Compose**: For handling screen transitions.
  - **Retrofit & OkHttp**: For API requests to OpenAI, Claude, etc.
  - **DataStore**: For securely storing API keys and user preferences.
  - **Material Icons Extended**: For UI icons.
  - **Coil**: For loading any potential images (optional but good to have).

## 2. Data Layer Implementation
- **Models**: Define data classes for `ChatMessage`, `ModelInfo`, `AppConfig`.
- **API Services**:
  - Create a unified `LLMService` interface.
  - Implement strategies for different providers:
    - **OpenAI Compatible** (OpenAI, DeepSeek, SiliconFlow, Volcengine).
    - **Anthropic** (Claude).
    - **Google** (Gemini).
- **Repository**:
  - `ChatRepository`: Handles message sending and history.
  - `SettingsRepository`: Manages API keys and selected model preference using DataStore.

## 3. UI Layer Implementation (Jetpack Compose)
- **Theme Customization**:
  - Adjust `Shape` to use large rounded corners (e.g., `RoundedCornerShape(24.dp)`).
  - Apply a clean, "Native" color scheme.
- **Components**:
  - `CapsuleBottomNavigation`: A custom floating bottom bar with capsule shape.
  - `ModelSelector`: A top bar component to switch models (aggregated by platform).
  - `ChatBubble`: Polished message bubbles.
- **Screens**:
  - **ChatScreen**: Main interface with message list and input area.
  - **SettingsScreen**: Form to input API keys for each platform.
  - **UsageScreen**: Display simple usage stats (placeholder or token count).

## 4. Feature Integration
- **Model Switching**: Clicking the title in ChatScreen opens a dialog/sheet to select platform -> model.
- **API Key Management**: Users can input keys in Settings, which are saved locally.
- **Chat Flow**:
  - User sends message -> App retrieves API key -> Calls selected provider -> Streams/Shows response.

## 5. Verification
- Verify UI navigation and styling.
- Verify API key storage.
- (Self-Correction) Since I cannot strictly test external paid APIs without valid keys, I will implement the networking logic robustly and verify the request construction/error handling.
