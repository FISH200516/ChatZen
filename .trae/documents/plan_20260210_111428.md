按照您提供的详细模型清单，我将更新模型视觉能力的判断逻辑。

### 1. 严格匹配用户提供的视觉模型清单 (Model Capability Logic)

在 `ModelInfo` 中实现 `supportsVision` 属性，严格基于您提供的关键词进行匹配：

* **OpenAI**: 匹配 `gpt-4o`, `gpt-4v`, `gpt-5`, `o4` (含 `mini` 等变体)。

* **Gemini**: 匹配 `gemini-3`, `gemini-2.5`, `gemini-1.5` (Pro/Flash)。

* **Claude**: 匹配 `claude-4.5`, `claude-3` (Opus/Sonnet/Haiku)。

* **DeepSeek**: 匹配 `deepseek-vl`, `deepseek-v3.2 thinking`。

* **Qwen**: 匹配 `qwen3-vl`, `qwen2.5-vl`, `qwen2-vl`, `qwen-omni`。

* **GLM**: 匹配 `glm-4v`, `glm-4.1v`, `glm-4.5v`, `glm-4.6v`, `glm-4.7v`。

* **Kimi**: 匹配 `kimi k2.5`, `kimi 1.9+`。

* **Doubao**: 匹配 `doubao seed`, `doubao-vl`。

* **Grok**: 匹配 `grok 4.1`, `grok 3`。

* **其他开源**: 匹配 `baichuan4-vl`, `step-2-vl`, `llava`, `minigpt`, `cogvlm`。

### 2. 数据与 API 层改造

* **ChatMessage**: 增加 `images: List<String>?` 字段。

* **ApiModels**: 重构 `OpenAIMessage` content 为 `JsonElement`，适配 OpenAI/Claude/Gemini 的多模态格式。

### 3. Repository 逻辑

* 发送消息时检测图片字段，根据厂商类型构建对应的多模态请求体（`image_url` / `image` block / `inlineData`）。

### 4. UI 实现

* **ChatScreen**: 添加图片上传按钮，**仅当模型名称匹配上述规则时启用**。

* **交互**: 集成系统相册选择器，支持预览与删除。

我将立即开始执行此计划。
